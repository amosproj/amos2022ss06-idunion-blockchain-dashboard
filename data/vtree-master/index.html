<!doctype html>
<html>
<head>
<meta charset="utf-8">

<title>Online JSON to Tree Diagram Converter</title>

<link rel="stylesheet" href="css/vtree.css" type="text/css"/>

<script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
<script src="dist/vtree.js"></script>

<!-- How to use debug mode.
  1. open browser's developer tools.
  2. input the following command.
     vt.debug(true).update()
-->

<script type="text/javascript">
var vt;

window.onload = function () {
  var container = document.getElementById("container");
  var msg = document.getElementById("msg");
  vt = new VTree(container);
  var reader = new VTree.reader.Object();

  function updateTree() {
    var s = document.getElementById("from-text").value;

    msg.innerHTML = '';

    try {
      var jsonData = JSON.parse(s);
    } catch (e) {
      msg.innerHTML = 'JSON parse error: ' + e.message;
    }

    var data = reader.read(jsonData);

    vt.data(data)
      .update();
  }

  function createSvgString() {
    document.getElementById("svg-text").value = vt.createSvgString();
  }

  document.getElementById("go-button").onclick = updateTree;
  document.getElementById("svg-button").onclick = createSvgString;

  updateTree();
};

</script>

</head>

<body>
  <div class="container">

    <h1>Online JSON to Tree Diagram Converter</h1>

    <p style="text-align: right;"><a href="https://github.com/ivan111/vtree">github</a></p>

    <div style="margin-top: 1em;">
      <label for="from-text">JSON</label><br>
      <textarea id="from-text" rows="6" cols="80">{
        "name": "Node1",
        "client-address": "tcp://192.168.188.32:9702",
        "node-address": "tcp://192.168.188.32:9701",
        "status": {
            "ok": true,
            "uptime": "0:38:37",
            "timestamp": 1654592769,
            "software": {
                "indy-node": "1.12.4",
                "sovrin": "unknown"
            }
        },
        "response": {
            "op": "REPLY",
            "result": {
                "type": "119",
                "identifier": "V4SGRU86Z58d6TV7PBUe6f",
                "reqId": 1654592769949344000,
                "data": {
                    "response-version": "0.0.1",
                    "timestamp": 1654592769,
                    "Hardware": {
                        "HDD_used_by_node": "0 MBs"
                    },
                    "Pool_info": {
                        "Read_only": false,
                        "Total_nodes_count": 4,
                        "f_value": 1,
                        "Quorums": "{'n': 4, 'f': 1, 'weak': Quorum(2), 'strong': Quorum(3), 'propagate': Quorum(2), 'prepare': Quorum(2), 'commit': Quorum(3), 'reply': Quorum(2), 'view_change': Quorum(3), 'election': Quorum(3), 'view_change_ack': Quorum(2), 'view_change_done': Quorum(3), 'same_consistency_proof': Quorum(2), 'consistency_proof': Quorum(2), 'ledger_status': Quorum(2), 'ledger_status_last_3PC': Quorum(2), 'checkpoint': Quorum(2), 'timestamp': Quorum(2), 'bls_signatures': Quorum(3), 'observer_data': Quorum(2), 'backup_instance_faulty': Quorum(2)}",
                        "Reachable_nodes": [
                            [
                                "Node1",
                                0
                            ],
                            [
                                "Node2",
                                1
                            ],
                            [
                                "Node3",
                                null
                            ],
                            [
                                "Node4",
                                null
                            ]
                        ],
                        "Unreachable_nodes": [],
                        "Reachable_nodes_count": 4,
                        "Unreachable_nodes_count": 0,
                        "Blacklisted_nodes": [],
                        "Suspicious_nodes": ""
                    },
                    "Protocol": {},
                    "Node_info": {
                        "Name": "Node1",
                        "Mode": "participating",
                        "Client_port": 9702,
                        "Client_ip": "0.0.0.0",
                        "Client_protocol": "tcp",
                        "Node_port": 9701,
                        "Node_ip": "0.0.0.0",
                        "Node_protocol": "tcp",
                        "did": "Gw6pDLhcBcoQesN72qfotTgFa7cbuqZpkX3Xo6pLhPhv",
                        "verkey": "33nHHYKnqmtGAVfZZGoP8hpeExeH45Fo8cKmd5mcnKYk7XgWNBxkkKJ",
                        "BLS_key": "4N8aUNHSgjQVgkpm8nhNEfDf6txHznoYREg9kirmJrkivgL4oSEimFF6nsQ6M41QvhM2Z33nves5vfSn9n1UwNFJBYtWVnHYMATn76vLuL3zU88KyeAYcHfsih3He6UHcXDxcaecHVz6jhCYz1P2UZn2bDVruL5wXpehgBfBaLKm3Ba",
                        "Metrics": {
                            "Delta": 0.1,
                            "Lambda": 240,
                            "Omega": 20,
                            "instances started": {
                                "0": 1647.464751007,
                                "1": 1647.46696371
                            },
                            "ordered request counts": {
                                "0": 0,
                                "1": 0
                            },
                            "ordered request durations": {
                                "0": 0,
                                "1": 0
                            },
                            "max master request latencies": 0,
                            "client avg request latencies": {
                                "0": null,
                                "1": null
                            },
                            "throughput": {
                                "0": 0,
                                "1": 0
                            },
                            "master throughput": null,
                            "total requests": 0,
                            "avg backup throughput": 0,
                            "master throughput ratio": null,
                            "average-per-second": {
                                "read-transactions": 0.0448672567,
                                "write-transactions": 0
                            },
                            "transaction-count": {
                                "ledger": 5,
                                "pool": 4,
                                "config": 0,
                                "audit": 21
                            },
                            "uptime": 2317
                        },
                        "Committed_ledger_root_hashes": {
                            "0": "b'GF82DUxdcCzj3CB3hjKq4BUDTBt9a2RSwLgQGYjSKTEw'",
                            "1": "b'DJLzEifT7n9DbiCHqQ5KWrWUPFBiZt349popapDfzo5p'",
                            "2": "b'GKot5hBsd81kMupNCXHaqbhv3huEbxAFMLnpcX2hniwn'",
                            "3": "b'8LijdrtQ5ZXVXnt4YPr13eLa27sJysgTKcjJ6BABcApM'"
                        },
                        "Committed_state_root_hashes": {
                            "0": "b'AP5SNH2bfKpfyBmgF8eSweu9sVpS1DpMHQUsS6KoP29P'",
                            "1": "b'GWEizEWQdGH5QFdxRpoQGvPR42zSUEJoFkQKGBHiNDbM'",
                            "2": "b'DfNLmH4DAHTKv63YPFJzuRdeEtVwF5RtVnvKYHd8iLEA'"
                        },
                        "Uncommitted_ledger_root_hashes": {},
                        "Uncommitted_ledger_txns": {
                            "0": {
                                "Count": 0
                            },
                            "1": {
                                "Count": 0
                            },
                            "2": {
                                "Count": 0
                            },
                            "3": {
                                "Count": 0
                            }
                        },
                        "Uncommitted_state_root_hashes": {
                            "0": "b'AP5SNH2bfKpfyBmgF8eSweu9sVpS1DpMHQUsS6KoP29P'",
                            "1": "b'GWEizEWQdGH5QFdxRpoQGvPR42zSUEJoFkQKGBHiNDbM'",
                            "2": "b'DfNLmH4DAHTKv63YPFJzuRdeEtVwF5RtVnvKYHd8iLEA'"
                        },
                        "View_change_status": {
                            "View_No": 0,
                            "VC_in_progress": false,
                            "Last_view_change_started_at": "1970-01-01 00:00:00",
                            "Last_complete_view_no": 0,
                            "IC_queue": {},
                            "VCDone_queue": {}
                        },
                        "Catchup_status": {
                            "Ledger_statuses": {
                                "0": "synced",
                                "1": "synced",
                                "2": "synced",
                                "3": "synced"
                            },
                            "Received_LedgerStatus": "",
                            "Waiting_consistency_proof_msgs": {
                                "0": null,
                                "1": null,
                                "2": null,
                                "3": null
                            },
                            "Number_txns_in_catchup": {
                                "0": 0,
                                "1": 0,
                                "2": 0,
                                "3": 0
                            },
                            "Last_txn_3PC_keys": {
                                "0": {
                                    "Node2": [
                                        null,
                                        null
                                    ],
                                    "Node4": [
                                        null,
                                        null
                                    ]
                                },
                                "1": {
                                    "Node2": [
                                        null,
                                        null
                                    ],
                                    "Node4": [
                                        null,
                                        null
                                    ]
                                },
                                "2": {
                                    "Node2": [
                                        null,
                                        null
                                    ],
                                    "Node4": [
                                        null,
                                        null
                                    ]
                                },
                                "3": {
                                    "Node4": [
                                        null,
                                        null
                                    ],
                                    "Node2": [
                                        null,
                                        null
                                    ]
                                }
                            }
                        },
                        "Freshness_status": {
                            "0": {
                                "Last_updated_time": "2022-06-07 09:02:39+00:00",
                                "Has_write_consensus": true
                            },
                            "1": {
                                "Last_updated_time": "2022-06-07 09:02:39+00:00",
                                "Has_write_consensus": true
                            },
                            "2": {
                                "Last_updated_time": "2022-06-07 09:02:39+00:00",
                                "Has_write_consensus": true
                            }
                        },
                        "Requests_timeouts": {
                            "Propagates_phase_req_timeouts": 0,
                            "Ordering_phase_req_timeouts": 0
                        },
                        "Count_of_replicas": 2,
                        "Replicas_status": {
                            "Node1:0": {
                                "Primary": "Node1:0",
                                "Watermarks": "0:300",
                                "Last_ordered_3PC": [
                                    0,
                                    21
                                ],
                                "Stashed_txns": {
                                    "Stashed_checkpoints": 0,
                                    "Stashed_PrePrepare": 0
                                }
                            },
                            "Node1:1": {
                                "Primary": "Node2:1",
                                "Watermarks": "0:9223372036854775807",
                                "Last_ordered_3PC": [
                                    0,
                                    0
                                ],
                                "Stashed_txns": {
                                    "Stashed_checkpoints": 0,
                                    "Stashed_PrePrepare": 0
                                }
                            }
                        }
                    },
                    "Software": {
                        "OS_version": "Linux-5.15.0-35-generic-x86_64-with-debian-buster-sid",
                        "Indy_packages": [
                            ""
                        ],
                        "indy-node": "1.12.4",
                        "sovrin": "unknown"
                    },
                    "Update_time": "Tuesday, June 7, 2022 9:06:09 AM +0000",
                    "Memory_profiler": [],
                    "Extractions": {
                        "journalctl_exceptions": [
                            ""
                        ],
                        "indy-node_status": [
                            ""
                        ],
                        "node-control status": [
                            ""
                        ],
                        "upgrade_log": "",
                        "stops_stat": null
                    }
                }
            }
        }
    }</textarea>
    </div>

    <div style="margin-top: 1em;">
      <input id="go-button" type="button" value="Visualize">
    </div>

    <div id="msg" style="color: red;"></div>

    <div id="container"></div>

    <div style="margin-top: 1em;">
      <input id="svg-button" type="button" value="Get SVG String">
    </div>

    <div style="margin-top: 1em;">
      <p>If you want to export the diagram as a svg file, copy the following text into a text editor and save the file with a .svg extension.</p>
      <textarea id="svg-text" rows="6" cols="80"></textarea>
    </div>

    <p style="text-align: right;">Created Date: 2014-07-27, Modified Date: 2018-11-01</p>

  </div>
</body>

</html>
